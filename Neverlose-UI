local Library = {}

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Remove previous GUI if exists
for i,v in next, game.CoreGui:GetChildren() do
    if v:IsA("ScreenGui") and v.Name == "MiniUI" then
        v:Destroy()
    end
end

-- Notification function
local function Notify(title, text)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = title,
        Text = text,
        Duration = 3
    })
end

-- Drag function
local function Dragify(frame)
    local dragging = false
    local dragInput, dragStart, startPos

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
            local delta = input.Position - dragStart
            frame.Position = startPos + UDim2.new(0, delta.X, 0, delta.Y)
        end
    end)
end

-- Main ScreenGui
local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
ScreenGui.Name = "MiniUI"

-- Panel (UI Panel)
local Panel = Instance.new("Frame", ScreenGui)
Panel.Size = UDim2.new(0, 300, 0, 200)
Panel.Position = UDim2.new(0.5, -150, 0.5, -100)
Panel.AnchorPoint = Vector2.new(0.5, 0.5)
Panel.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Panel.BorderSizePixel = 0
Dragify(Panel)

-- Top bar with X close button
local TopBar = Instance.new("Frame", Panel)
TopBar.Size = UDim2.new(1, 0, 0, 30)
TopBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
TopBar.BorderSizePixel = 0

local XButton = Instance.new("TextButton", TopBar)
XButton.Size = UDim2.new(0, 30, 1, 0)
XButton.Position = UDim2.new(1, -30, 0, 0)
XButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
XButton.Text = "X"
XButton.TextColor3 = Color3.new(1,1,1)
XButton.Font = Enum.Font.ArialBold
XButton.TextSize = 20

XButton.MouseButton1Click:Connect(function()
    Panel.Visible = false
end)

-- Toggle circle button (small circle icon)
local ToggleButton = Instance.new("ImageButton", ScreenGui)
ToggleButton.Size = UDim2.new(0, 40, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0, 10)
ToggleButton.BackgroundColor3 = Color3.fromRGB(255,255,255)
ToggleButton.BorderSizePixel = 0
ToggleButton.Image = "rbxassetid://6031094677" -- circle icon from Roblox
ToggleButton.ImageColor3 = Color3.fromRGB(255,255,255)

ToggleButton.MouseButton1Click:Connect(function()
    Panel.Visible = not Panel.Visible
end)

-- Example content inside panel
local Label = Instance.new("TextLabel", Panel)
Label.Size = UDim2.new(1, -20, 1, -40)
Label.Position = UDim2.new(0, 10, 0, 40)
Label.Text = "Small UI Panel"
Label.TextColor3 = Color3.fromRGB(255,255,255)
Label.BackgroundTransparency = 1
Label.Font = Enum.Font.GothamBold
Label.TextSize = 20

-- Make the panel draggable
Dragify(Panel)

-- Optional: start with panel visible
Panel.Visible = true

return {
    ToggleUI = function()
        Panel.Visible = not Panel.Visible
    end,
    ShowUI = function()
        Panel.Visible = true
    end,
    HideUI = function()
        Panel.Visible = false
    end
}
